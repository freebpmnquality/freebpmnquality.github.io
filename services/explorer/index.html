<!doctype html>

<html lang="en">

<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-W3TJ27QQ4T"></script>
    <script src="/products/ecommerce.js"></script>
    <script>
        // [start] GA Tag
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }
        gtag('js', new Date());

        gtag('config', 'G-W3TJ27QQ4T');
        // [end] GA Tag

        function getURLParam(param) {
            return new URL(window.location.href).searchParams.get(param);
        }

        if (getURLParam('dev') === null) {
            ECommerce.clickEvent();
        }
    </script>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="stylesheet" href="../css/bootstrap.min.css" />
    <link href="https://fonts.googleapis.com/css?family=Kanit" rel="stylesheet" />
    <link rel="shortcut icon" href="img/icon.png" type="image/x-icon">

    <title>freebpmnqualityScan</title>
    <meta name="title" content="freebpmnqualityScan">
    <meta name="description" content="A blockchain token explorer of the freebpmnquality ecosystem.">

    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8990058470889069" crossorigin="anonymous"></script>

    <style>
        body {
            font-family: 'Kanit', sans-serif;
            background: rgb(0, 198, 255);
            background: radial-gradient(circle, rgba(0, 198, 255, 0.4) 0%, rgba(0, 108, 255, 0.4) 100%);
        }
    </style>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <span class="navbar-brand">
            <img src="img/icon.png" width="30" height="30" class="d-inline-block align-top mr-1" alt="icon" style="border-radius: 1rem"> freebpmnqualityScan
        </span>

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
    </nav>

    <div class="mt-4 mb-4 ml-4 mr-4">
        <div class="row">
            <div class="col-sm-6 mb-4">
                <div class="card h-100" style="border-radius: 1rem;">
                    <div class="card-body">
                        <div class="table-responsive mb-0">
                            <table class="table table-borderless mb-0">
                                <tbody>
                                    <tr>
                                        <th scope="row">Token:</th>
                                        <td><img src="/data/icons/qbmt.png" width="32"> QBMT</td>
                                    </tr>

                                    <tr>
                                        <th scope="row">Price:</th>
                                        <td>$<span id="qbmt-price"></span></td>
                                    </tr>

                                    <tr>
                                        <th scope="row">Market Cap:</th>
                                        <td>$<span id="qbmt-cap"></span></td>
                                    </tr>

                                    <tr>
                                        <th scope="row">Total Supply:</th>
                                        <td><span id="qbmt-supply"></span> QBMT</td>
                                    </tr>

                                    <tr>
                                        <th scope="row">Holders:</th>
                                        <td id="qbmt-holders"></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-sm-6 mb-4">
                <div class="card h-100" style="border-radius: 1rem;">
                    <div class="card-body">
                        <div class="table-responsive mb-0">
                            <table class="table table-borderless mb-0">
                                <tbody>
                                    <tr>
                                        <th scope="row" colspan="2">
                                            <h5 class="badge badge-primary">Ledger</h5>
                                        </th>
                                    </tr>
                                    <tr>
                                        <th scope="row">Hash:</th>
                                        <td><code><span id="ledger-hash"></span></code></td>
                                    </tr>
                                    <tr>
                                        <th scope="row">Timestamp:</th>
                                        <td><span id="ledger-timestamp"></span></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="../js/jquery-3.4.1.min.js"></script>
    <script src="../js/popper.min.js"></script>
    <script src="../js/bootstrap.min.js"></script>

    <script src="../js/crypto-js.min.js"></script>

    <script src="/data/ledger.js"></script>

    <script>
        const tokenSymbol = 'QBMT';

        const tokenData = Ledger.getTokenData(tokenSymbol);

        $('#qbmt-price').text(tokenData['price'].toLocaleString('en-US'));
        $('#qbmt-cap').text(tokenData['supply'].toLocaleString('en-US'));
        $('#qbmt-supply').text(tokenData['supply'].toLocaleString('en-US'));

        const blockData = Ledger.getBlockData(tokenSymbol);

        $('#ledger-hash').text(blockData['hash']);
        $('#ledger-timestamp').text(new Date(blockData['timestamp'] * 1000).toLocaleString());

        $('#qbmt-holders').empty();

        for (let address in Ledger.getTokenData(tokenSymbol)['holders']) {
            $('#qbmt-holders').append(`<p class="mb-0">
                    <code><a href="/services/efforts/wallet/?p=${btoa(JSON.stringify({ address: address, value: Ledger.getTokenData('QBMT')['holders'][address] }))}" target="_blank">${address}</a></code>: ${Ledger.getTokenData(tokenSymbol)['holders'][address].toLocaleString('en-US')} ${tokenSymbol} <span class="text-muted">$${Ledger.getTokenData(tokenSymbol)['holders'][address].toLocaleString('en-US')}</span>
                </p>`);
        }
    </script>
</body>

</html>